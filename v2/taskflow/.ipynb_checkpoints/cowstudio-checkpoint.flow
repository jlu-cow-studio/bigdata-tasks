nodes:
  # starting all tasks 
  - name: SentinalStart
    type: command
    config:
      command: echo "start all tasks"

  # ##################################
  # ods tasks
  # ##################################
  # starting ods tasks node
  - name: StartOds
    type: command
    config:
      command: echo "ods tasks start"
    dependsOn:
        - SentinalStart

  - name: UserOds
    type: command
    config:
      command: bash run.sh pyfiles/user_ods.py
    dependsOn:
        - StartOds

  - name: TagOds
    type: command
    config:
      command: bash run.sh pyfiles/tag_ods.py
    dependsOn:
        - StartOds

  - name: ItemOds
    type: command
    config:
      command: bash run.sh pyfiles/item_ods.py
    dependsOn:
        - StartOds

  - name: ItemTagOds
    type: command
    config:
      command: bash run.sh pyfiles/item_tag_ods.py
    dependsOn:
        - StartOds

  - name: UserTagOds
    type: command
    config:
      command: bash run.sh pyfiles/user_tag_ods.py
    dependsOn:
        - StartOds

  - name: UserActionOds
    type: command
    config:
      command: bash run.sh pyfiles/event_ods.py
    dependsOn:
        - StartOds

  - name: FeedRecordOds
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartOds

  - name: FinishOds
    type: command
    config:
      command: echo "ods tasks finish"
    dependsOn:
        - UserOds
        - TagOds
        - ItemOds
        - ItemTagOds
        - UserTagOds
        - UserActionOds
        - FeedRecordOds

  # #######################################
  # word and text processing
  # #######################################
  # 
  - name: StartDataProcess
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - FinishOds
        
  # 
  - name: ProcessCattleProdText
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartDataProcess
        
  # 
  - name: CalculateCattleProdTFIDF
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ProcessCattleProdText
        
  # 
  - name: ProcessVetTwitteText
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartDataProcess
        
  # 
  - name: CalculateVetTwitteTFIDF
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ProcessVetTwitteText



  # #######################################
  # user score
  # #######################################
  #
  - name: CalculateUserScoreAndLevel
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartDataProcess

  - name: CalculateCattleProdActionMatrix
    type: command
    config:
      command: bash run.sh pyfiles/user_item_action_matrix.py
    dependsOn:
        - StartDataProcess
  #
  - name: CalculateVetTwitteActionMatrix
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartDataProcess
        
  #     
  - name: FinishDataProcess
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - CalculateUserScoreAndLevel
        - CalculateVetTwitteActionMatrix
        - CalculateCattleProdTFIDF
        - CalculateCattleProdActionMatrix
        - CalculateVetTwitteTFIDF
        
  # ######################################################
  # list based recommendation
  # ######################################################
  
  

  # 
  - name: StartRecommendationTasks
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - FinishDataProcess
  
  

  # 
  - name: StartListBased
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartRecommendationTasks
        
  # 
  - name: CalculateItemScoreRanking
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartListBased

  # 
  - name: RankingTableToCache
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - CalculateItemScoreRanking
        
        
  # 
  - name: FinishListBased
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - RankingTableToCache
  
  
  
  # ######################################################
  # content based recommendation
  # ######################################################
  #
  - name: StartContentBased
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartRecommendationTasks
        
  - name: CalculateGeoFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartContentBased
   
  - name: CalculateTagFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartContentBased
   
  - name: CalculateCattleProdTextFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartContentBased
   
  - name: CalculateVetTwitteTextFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartContentBased
  # 
  - name: CalculateCattleProdUserItemSim
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - CalculateGeoFeature
        - CalculateTagFeature
        - CalculateCattleProdTextFeature
  # 
  - name: CalculateVetTwitteUserItemSim
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - CalculateGeoFeature
        - CalculateTagFeature
        - CalculateVetTwitteTextFeature
        
        
  - name: ContentBasedRecToCache
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - CalculateCattleProdUserItemSim
        - CalculateVetTwitteUserItemSim

  # 
  - name: FinishContentBased
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ContentBasedRecToCache


  # ######################################################
  # collabrative filtering recommendation
  # ######################################################
  # 
  - name: StartCFBased
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartRecommendationTasks
  # 
  - name: CattleProdActionMatrixFactorization
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartCFBased
  # 
  - name: CattleProdGenerateCFRecommendation
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - CattleProdActionMatrixFactorization
            
        
  # 
  - name: VetTwitteActionMatrixFactorization
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartCFBased
        
  # 
  - name: VetTwitteGenerateCFRecommendation
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - VetTwitteActionMatrixFactorization


  # 
  - name: FinishCF
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - CattleProdGenerateCFRecommendation
        - VetTwitteGenerateCFRecommendation
        
        
  # ########################################
  # Recommendation Evaluation
  # ########################################
  

  # 
  - name: StartEvaluation
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartRecommendationTasks
  

  # 
  - name: EvaluateRecommendation
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartEvaluation

  # 
  - name: FinishEvaluation
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - EvaluateRecommendation
  
  

  # 
  - name: FinishRecommendationTasks
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - FinishCF
        - FinishListBased
        - FinishContentBased
        - FinishEvaluation
