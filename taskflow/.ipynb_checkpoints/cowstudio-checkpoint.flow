nodes:
  # starting all tasks 
  - name: SentinalStart
    type: command
    config:
      command: echo "start all tasks"

  # ##################################
  # ods tasks
  # ##################################
  # starting ods tasks node
  - name: StartOds
    type: command
    config:
      command: echo "ods tasks start"
    dependsOn:
        - SentinalStart

  - name: UserOds
    type: command
    config:
      command: bash run.sh pyfiles/user_ods.py
    dependsOn:
        - StartOds

  - name: TagOds
    type: command
    config:
      command: bash run.sh pyfiles/tag_ods.py
    dependsOn:
        - StartOds

  - name: ItemOds
    type: command
    config:
      command: bash run.sh pyfiles/item_ods.py
    dependsOn:
        - StartOds

  - name: ItemTagOds
    type: command
    config:
      command: bash run.sh pyfiles/item_tag_ods.py
    dependsOn:
        - StartOds

  - name: UserTagOds
    type: command
    config:
      command: bash run.sh pyfiles/user_tag_ods.py
    dependsOn:
        - StartOds

  - name: EventOds
    type: command
    config:
      command: bash run.sh pyfiles/event_ods.py
    dependsOn:
        - StartOds

  - name: FinishOds
    type: command
    config:
      command: echo "ods tasks finish"
    dependsOn:
        - UserOds
        - TagOds
        - ItemOds
        - ItemTagOds
        - UserTagOds
        - EventOds

  # #######################################
  # word and text processing
  # #######################################
  # starting item tf-idf tasks
  - name: ItemTFIDF
    type: command
    config:
      command: bash run.sh pyfiles/item_tfidf.py
    dependsOn:
        - FinishOds

  # starting item inverse index to redis
  - name: ItemInverseIndex
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ItemTFIDF
        
  # starting item hot word
  - name: ItemHotWord
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ItemTFIDF

  # #######################################
  # item hot and fresh list
  # #######################################
  # starting item score task
  - name: ItemScore
    type: command
    config:
      command: bash run.sh pyfiles/item_scores.py
    dependsOn:
        - FinishOds

  # starting item order and list task
  - name: ItemOrderList
    type: command
    config:
      command: bash run.sh pyfiles/item_order_list.py
    dependsOn:
        - ItemScore

  # ######################################
  # Collaborative filtering user-item
  # ######################################
  - name: UserItemActionMatrix
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - FinishOds
  
  # ############################################
  # content based user-item
  # ############################################
  - name: StartUserItemContentBased
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ItemTFIDF
        - FinishOds
        - UserItemActionMatrix
  # ##################################
  # content based item feature
  # ##################################
  # starting item order and list task
  - name: StartItemContentBasedFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartUserItemContentBased
        
  # starting item order and list task
  - name: ItemContentBasedTextFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartItemContentBasedFeature

  # starting item order and list task
  - name: ItemContentBasedGeoFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartItemContentBasedFeature

  # starting item order and list task
  - name: ItemContentBasedTagFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartItemContentBasedFeature

  # starting item order and list task
  - name: FinishItemContentBasedFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ItemContentBasedGeoFeature
        - ItemContentBasedTagFeature
        - ItemContentBasedTextFeature
        
  # ##################################
  # content based user feature
  # ##################################
  # starting item order and list task
  - name: StartUserItemContentBasedFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartUserItemContentBased
        
  # starting item order and list task
  - name: UserItemContentBasedTextFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - ItemContentBasedTextFeature
        - StartUserItemContentBasedFeature

  # starting item order and list task
  - name: UserItemContentBasedGeoFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartUserItemContentBasedFeature

  # starting item order and list task
  - name: UserItemContentBasedTagFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - StartUserItemContentBasedFeature

  # starting item order and list task
  - name: FinishUserItemContentBasedFeature
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - UserItemContentBasedGeoFeature
        - UserItemContentBasedTagFeature
        - UserItemContentBasedTextFeature

  # 
  - name: FinishUserItemContentBased
    type: command
    config:
      command: bash run.sh void
    dependsOn:
        - FinishItemContentBasedFeature
        - FinishUserItemContentBasedFeature



